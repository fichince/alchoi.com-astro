---
import type { GetStaticPaths, InferGetStaticParamsType, InferGetStaticPropsType } from 'astro';
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import Navbar from '../../components/Navbar.astro';
import TagList from '../../components/TagList.astro';

export const getStaticPaths = (async ({ paginate }) => {
  const blogPosts = await getCollection('blog');
  const pages = paginate([...blogPosts].reverse(), { pageSize: 5 });
  return pages;
}) satisfies GetStaticPaths;

type Params = InferGetStaticParamsType<typeof getStaticPaths>;
type Props = InferGetStaticPropsType<typeof getStaticPaths>;

const { page } = Astro.params as Params;

const { 
  page: { 
    data: posts,
    url
  },
} = Astro.props;


const post = posts[0];

---
<Layout title="Blog">
  <Navbar />
  <header>
    <h1>Blog</h1>
    <div>
      <TagList />
    </div>
    <hr />

    {posts.map((post) => (
      <article>
        {post.data.title}
      </article>
    ))}
  </header>
</Layout>

<style>
</style>