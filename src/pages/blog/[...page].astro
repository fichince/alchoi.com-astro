---
import type { GetStaticPaths, Page } from 'astro';
import { CollectionEntry, getCollection } from 'astro:content';

import BlogLayout from '@src/layouts/BlogLayout.astro';

export const getStaticPaths = (async ({ paginate }) => {
  const collection = await getCollection('blog');
  const blogPosts = collection.filter((post) => !post.data.draft).reverse();
  const pages = paginate(blogPosts, { pageSize: 5 });
  return pages;
}) satisfies GetStaticPaths;

const page : Page<CollectionEntry<"blog">> = Astro.props.page;
---
<BlogLayout page={page} />